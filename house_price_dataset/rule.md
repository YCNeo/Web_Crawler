# Taipei Rent Dataset — Data-Cleaning Rules (v2025-05-16 R2)

## 1. 欄位管理  
| 項目                 | 規則                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| -------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **固定順序 (前→後)** | `編號`, `交易標的`, `鄉鎮市區`, `土地位置建物門牌`, `租賃年月日`, `總額元`, `出租型態`, `租賃期間天數`, `主要用途`, `租賃層次`, `總樓層數`, `建物型態`, `交易比棟數_土地`, `交易比棟數_建物`, `交易比棟數_車位`, `租賃住宅服務`, `有無管理組織`, `有無管理員`, `有無附傢俱`, `有無電梯`, `主要建材`, `建物現況格局-房`, `建物現況格局-廳`, `建物現況格局-衛`, `建物現況格局-隔間`, `都市土地使用分區`, `土地面積平方公尺`, `建物總面積平方公尺`, `單價元平方公尺`, `車位類別`, `車位面積平方公尺`, `車位總額元`, `建築完成年月`, `附屬設備_冷氣`, `附屬設備_熱水器`, `附屬設備_洗衣機`, `附屬設備_電視機`, `附屬設備_冰箱`, `附屬設備_瓦斯或天然氣`, `附屬設備_有線電視`, `附屬設備_網路`, `備註`, `source_file` |
| **移除欄位**         | `非都市土地使用分區`, `非都市土地使用編定`, **`附屬設備`**, **`租賃期間`**, `建築完成年月_TS`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **新增 / 重命名**    | * `建築完成年月_TS` → **`建築完成年月`** (`YYYY-MM-DD`)<br>* `租賃期間天數` (int / `"Na"`)<br>* `交易比棟數_土地/建物/車位` (數字)<br>* `附屬設備_{名稱}` (1/0)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |

## 2. 內容轉換  
| 欄位             | 規則                                                                                                         |
| ---------------- | ------------------------------------------------------------------------------------------------------------ |
| **日期**         | ROC → 西元；`租賃年月日` 與 `建築完成年月` 解析失敗刪列                                                      |
| **租賃期間天數** | 起~迄 → 天數；失敗 → `"Na"`                                                                                  |
| **租賃層次**     | `三層`→ 3、`地下3層`→ −3、`地下層`→ 0… 失敗 → `Na`                                                           |
| **交易比棟數**   | 支援「帶詞」或「僅數字」多格式，映射至三欄                                                                   |
| **1/0 布林**     | `有無管理組織`, `有無管理員`, `有無附傢俱`, `有無電梯`, `建物現況格局-隔間`：「有」→1，「無」→0，空值 → `Na` |
| **主要建材**     | 空值 → `"Na"`                                                                                                |
| **總額元**       | 去逗號 → 數字；失敗刪列                                                                                      |

## 3. 列刪除條件  
1. `主要用途` 不含關鍵字列表  
2. `建築完成年月` 解析失敗  
3. `租賃年月日` 解析失敗  
4. `房` / `廳` / `衛` > 100  
5. `總額元` 解析失敗  

## 4. 附屬設備  
* 彙整所有設備名稱 → 建立 **`附屬設備_{名稱}`** 欄位 (1/0)。  
* 完成後刪除原 `附屬設備`。

## 5. 其他  
* 讀檔 `dynamicTyping=false`，先以字串處理。  
* 空字串保留；布林欄未知值 → `"Na"`。  
* 輸出：`root/dataset/taipei_rent_clean.csv`（或 CLI 指定）。  
* 終端僅列刪除統計與檔案路徑。
